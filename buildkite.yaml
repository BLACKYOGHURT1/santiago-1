# SPDX-FileCopyrightText: 2022 Kevin Amado <kamadorueda@gmail.com>
#
# SPDX-License-Identifier: GPL-3.0-only

steps:
  - label: check
    command:
      - echo --- Prepare environment
      - direnv allow
      - eval "$(direnv export bash)"
      - echo +++ Check
      - cargo check

  - label: coverage
    command:
      - echo --- Prepare environment
      - direnv allow
      - eval "$(direnv export bash)"
      - echo +++ Coverage
      - cargo tarpaulin

  - label: legal
    command:
      - echo --- Prepare environment
      - direnv allow
      - eval "$(direnv export bash)"
      - echo +++ Legal
      - reuse lint

  - label: lint
    command:
      - echo --- Prepare environment
      - direnv allow
      - eval "$(direnv export bash)"
      - echo +++ Lint
      - cargo clippy

  - label: test
    command:
      - echo --- Prepare environment
      - direnv allow
      - eval "$(direnv export bash)"
      - echo +++ Test
      - cargo test
